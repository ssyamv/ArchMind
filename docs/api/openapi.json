{
  "openapi": "3.0.3",
  "info": {
    "title": "ArchMind AI API",
    "description": "æœ¬åœ°ä¼˜å…ˆçš„ AI æ–‡æ¡£å¤„ç†å¹³å° API â€” å°†å†å²æ–‡æ¡£è½¬åŒ–ä¸º PRD å’ŒåŸå‹",
    "version": "0.1.0",
    "contact": {
      "name": "ArchMind Team",
      "url": "https://github.com/archmind-ai/archmind"
    },
    "license": {
      "name": "MIT"
    }
  },
  "servers": [
    {
      "url": "http://localhost:3000",
      "description": "æœ¬åœ°å¼€å‘æœåŠ¡å™¨"
    }
  ],
  "tags": [
    {
      "name": "auth",
      "description": "è®¤è¯ä¸æˆæƒ"
    },
    {
      "name": "documents",
      "description": "æ–‡æ¡£ç®¡ç†"
    },
    {
      "name": "search",
      "description": "æœç´¢ï¼ˆRAG æ··åˆæ£€ç´¢ï¼‰"
    },
    {
      "name": "prd",
      "description": "PRD æ–‡æ¡£ç”Ÿæˆ"
    },
    {
      "name": "conversations",
      "description": "å¯¹è¯ç³»ç»Ÿ"
    },
    {
      "name": "workspaces",
      "description": "å·¥ä½œåŒºç®¡ç†"
    },
    {
      "name": "prototypes",
      "description": "åŸå‹ç®¡ç†"
    },
    {
      "name": "user",
      "description": "ç”¨æˆ·é…ç½®"
    }
  ],
  "components": {
    "securitySchemes": {
      "cookieAuth": {
        "type": "apiKey",
        "in": "cookie",
        "name": "auth_token",
        "description": "HTTP-Only JWT Cookie"
      }
    },
    "schemas": {
      "Error": {
        "type": "object",
        "required": [
          "success",
          "message"
        ],
        "properties": {
          "success": {
            "type": "boolean",
            "example": false
          },
          "message": {
            "type": "string",
            "example": "æ“ä½œå¤±è´¥"
          }
        }
      },
      "User": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "email": {
            "type": "string",
            "format": "email"
          },
          "username": {
            "type": "string"
          },
          "fullName": {
            "type": "string",
            "nullable": true
          },
          "avatarUrl": {
            "type": "string",
            "nullable": true
          },
          "isActive": {
            "type": "boolean"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "Document": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "title": {
            "type": "string"
          },
          "fileType": {
            "type": "string",
            "enum": [
              "pdf",
              "docx",
              "md",
              "txt"
            ]
          },
          "fileSize": {
            "type": "integer",
            "description": "æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰"
          },
          "processingStatus": {
            "type": "string",
            "enum": [
              "pending",
              "processing",
              "completed",
              "failed",
              "retrying"
            ]
          },
          "chunksCount": {
            "type": "integer",
            "nullable": true
          },
          "vectorsCount": {
            "type": "integer",
            "nullable": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "DocumentStatus": {
        "type": "object",
        "properties": {
          "documentId": {
            "type": "string",
            "format": "uuid"
          },
          "title": {
            "type": "string"
          },
          "status": {
            "type": "string",
            "enum": [
              "pending",
              "processing",
              "completed",
              "failed",
              "retrying"
            ]
          },
          "progress": {
            "type": "number",
            "minimum": 0,
            "maximum": 100
          },
          "chunksCount": {
            "type": "integer",
            "nullable": true
          },
          "vectorsCount": {
            "type": "integer",
            "nullable": true
          },
          "error": {
            "type": "string",
            "nullable": true
          },
          "startedAt": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "completedAt": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          }
        }
      },
      "SearchResult": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "documentId": {
            "type": "string",
            "format": "uuid"
          },
          "documentTitle": {
            "type": "string"
          },
          "contentPreview": {
            "type": "string",
            "description": "å†…å®¹æ‘˜è¦ï¼ˆæœ€å¤š 200 å­—ç¬¦ï¼‰"
          },
          "fullContent": {
            "type": "string"
          },
          "similarity": {
            "type": "number",
            "minimum": 0,
            "maximum": 1
          }
        }
      },
      "PrdDocument": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "title": {
            "type": "string"
          },
          "content": {
            "type": "string",
            "description": "Markdown æ ¼å¼çš„ PRD å†…å®¹"
          },
          "status": {
            "type": "string",
            "enum": [
              "draft",
              "review",
              "approved",
              "archived"
            ]
          },
          "workspaceId": {
            "type": "string",
            "format": "uuid",
            "nullable": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "Workspace": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string",
            "nullable": true
          },
          "icon": {
            "type": "string"
          },
          "color": {
            "type": "string"
          },
          "isDefault": {
            "type": "boolean"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "Prototype": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "title": {
            "type": "string"
          },
          "status": {
            "type": "string",
            "enum": [
              "draft",
              "review",
              "approved"
            ]
          },
          "pages": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "string",
                  "format": "uuid"
                },
                "pageName": {
                  "type": "string"
                },
                "slug": {
                  "type": "string"
                },
                "htmlContent": {
                  "type": "string"
                }
              }
            }
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      }
    }
  },
  "security": [
    {
      "cookieAuth": []
    }
  ],
  "paths": {
    "/api/auth/register": {
      "post": {
        "tags": [
          "auth"
        ],
        "summary": "ç”¨æˆ·æ³¨å†Œ",
        "security": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email",
                  "password"
                ],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "user@example.com"
                  },
                  "password": {
                    "type": "string",
                    "minLength": 8,
                    "example": "SecurePass123"
                  },
                  "fullName": {
                    "type": "string",
                    "maxLength": 100,
                    "nullable": true
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "æ³¨å†ŒæˆåŠŸ",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "user": {
                      "$ref": "#/components/schemas/User"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "é‚®ç®±å·²æ³¨å†Œæˆ–è¾“å…¥æ— æ•ˆ",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/login": {
      "post": {
        "tags": [
          "auth"
        ],
        "summary": "ç”¨æˆ·ç™»å½•",
        "security": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email",
                  "password"
                ],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email"
                  },
                  "password": {
                    "type": "string",
                    "minLength": 1
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "ç™»å½•æˆåŠŸï¼ˆè®¾ç½® HTTP-Only Cookieï¼‰",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "user": {
                      "$ref": "#/components/schemas/User"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "é‚®ç®±æˆ–å¯†ç é”™è¯¯",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "è´¦å·å·²ç¦ç”¨",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/logout": {
      "post": {
        "tags": [
          "auth"
        ],
        "summary": "é€€å‡ºç™»å½•ï¼ˆæ¸…é™¤ Cookieï¼‰",
        "responses": {
          "200": {
            "description": "é€€å‡ºæˆåŠŸ"
          }
        }
      }
    },
    "/api/auth/me": {
      "get": {
        "tags": [
          "auth"
        ],
        "summary": "è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯",
        "responses": {
          "200": {
            "description": "å½“å‰ç”¨æˆ·ä¿¡æ¯",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "user": {
                      "$ref": "#/components/schemas/User"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "æœªç™»å½•",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/documents": {
      "get": {
        "tags": [
          "documents"
        ],
        "summary": "è·å–æ–‡æ¡£åˆ—è¡¨",
        "parameters": [
          {
            "name": "workspace_id",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "å·¥ä½œåŒº ID è¿‡æ»¤"
          },
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 1,
              "minimum": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 50,
              "minimum": 1,
              "maximum": 200
            }
          }
        ],
        "responses": {
          "200": {
            "description": "æ–‡æ¡£åˆ—è¡¨",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "documents": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/Document"
                          }
                        },
                        "total": {
                          "type": "integer"
                        },
                        "page": {
                          "type": "integer"
                        },
                        "limit": {
                          "type": "integer"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/documents/upload": {
      "post": {
        "tags": [
          "documents"
        ],
        "summary": "ä¸Šä¼ æ–‡æ¡£",
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "required": [
                  "file"
                ],
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary",
                    "description": "æ–‡æ¡£æ–‡ä»¶ï¼ˆPDF/DOCX/MD/TXTï¼‰"
                  },
                  "workspaceId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "title": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "ä¸Šä¼ æˆåŠŸï¼Œå¼‚æ­¥å¤„ç†ä¸­",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Document"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/documents/{id}": {
      "get": {
        "tags": [
          "documents"
        ],
        "summary": "è·å–æ–‡æ¡£è¯¦æƒ…",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "æ–‡æ¡£è¯¦æƒ…",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Document"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "æ–‡æ¡£ä¸å­˜åœ¨",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "documents"
        ],
        "summary": "åˆ é™¤æ–‡æ¡£",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "åˆ é™¤æˆåŠŸ"
          },
          "404": {
            "description": "æ–‡æ¡£ä¸å­˜åœ¨",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/documents/{id}/status": {
      "get": {
        "tags": [
          "documents"
        ],
        "summary": "æŸ¥è¯¢æ–‡æ¡£å¤„ç†çŠ¶æ€ï¼ˆè½®è¯¢ç”¨ï¼‰",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "æ–‡æ¡£å¤„ç†çŠ¶æ€",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "$ref": "#/components/schemas/DocumentStatus"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/documents/{id}/events": {
      "get": {
        "tags": [
          "documents"
        ],
        "summary": "æ–‡æ¡£å¤„ç†çŠ¶æ€ SSE å®æ—¶æ¨é€ï¼ˆæ›¿ä»£è½®è¯¢ï¼‰",
        "description": "é€šè¿‡ Server-Sent Events å®æ—¶æ¨é€æ–‡æ¡£å¤„ç†çŠ¶æ€å˜æ›´ã€‚è¿æ¥åä¼šè‡ªåŠ¨æ¨é€å½“å‰çŠ¶æ€ï¼Œç›´åˆ°å¤„ç†å®Œæˆæˆ–è¿æ¥è¶…æ—¶ï¼ˆ10 åˆ†é’Ÿï¼‰ã€‚",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "SSE äº‹ä»¶æµ",
            "content": {
              "text/event-stream": {
                "schema": {
                  "type": "string",
                  "description": "SSE äº‹ä»¶ï¼Œevent ç±»å‹ä¸º \"status\" æˆ– \"timeout\""
                }
              }
            }
          }
        }
      }
    },
    "/api/documents/{id}/download": {
      "get": {
        "tags": [
          "documents"
        ],
        "summary": "ä¸‹è½½æ–‡æ¡£ï¼ˆç”Ÿæˆé¢„ç­¾å URL å¹¶é‡å®šå‘ï¼‰",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "302": {
            "description": "é‡å®šå‘åˆ°é¢„ç­¾åä¸‹è½½ URL"
          },
          "401": {
            "description": "æœªè®¤è¯",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "æ— æƒè®¿é—®",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "æ–‡æ¡£ä¸å­˜åœ¨",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/documents/{id}/versions": {
      "get": {
        "tags": [
          "documents"
        ],
        "summary": "è·å–æ–‡æ¡£ç‰ˆæœ¬å†å²",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "ç‰ˆæœ¬åˆ—è¡¨",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "documentId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "currentVersion": {
                          "type": "integer"
                        },
                        "totalVersions": {
                          "type": "integer"
                        },
                        "versions": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "format": "uuid"
                              },
                              "version": {
                                "type": "integer"
                              },
                              "fileSize": {
                                "type": "integer"
                              },
                              "changeSummary": {
                                "type": "string",
                                "nullable": true
                              },
                              "createdAt": {
                                "type": "string",
                                "format": "date-time"
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/documents/search": {
      "post": {
        "tags": [
          "search"
        ],
        "summary": "æ–‡æ¡£æ··åˆæœç´¢ï¼ˆRAGï¼‰",
        "description": "æ”¯æŒä¸‰ç§æœç´¢æ¨¡å¼ï¼škeywordï¼ˆå…¨æ–‡æ£€ç´¢ï¼‰ã€vectorï¼ˆå‘é‡è¯­ä¹‰æ£€ç´¢ï¼‰ã€hybridï¼ˆRRF èåˆï¼Œé»˜è®¤ï¼‰",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "query"
                ],
                "properties": {
                  "query": {
                    "type": "string",
                    "minLength": 1,
                    "description": "æœç´¢å…³é”®è¯"
                  },
                  "mode": {
                    "type": "string",
                    "enum": [
                      "keyword",
                      "vector",
                      "hybrid"
                    ],
                    "default": "hybrid"
                  },
                  "topK": {
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 50,
                    "default": 5,
                    "description": "è¿”å›ç»“æœæ•°é‡"
                  },
                  "threshold": {
                    "type": "number",
                    "minimum": 0,
                    "maximum": 1,
                    "default": 0.7,
                    "description": "ç›¸ä¼¼åº¦é˜ˆå€¼"
                  },
                  "keywordWeight": {
                    "type": "number",
                    "minimum": 0,
                    "maximum": 1,
                    "default": 0.3,
                    "description": "hybrid æ¨¡å¼ï¼šå…³é”®è¯æƒé‡"
                  },
                  "vectorWeight": {
                    "type": "number",
                    "minimum": 0,
                    "maximum": 1,
                    "default": 0.7,
                    "description": "hybrid æ¨¡å¼ï¼šå‘é‡æƒé‡"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "æœç´¢ç»“æœ",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "query": {
                          "type": "string"
                        },
                        "mode": {
                          "type": "string"
                        },
                        "totalResults": {
                          "type": "integer"
                        },
                        "results": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/SearchResult"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/prd": {
      "get": {
        "tags": [
          "prd"
        ],
        "summary": "è·å– PRD åˆ—è¡¨",
        "parameters": [
          {
            "name": "workspace_id",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "PRD åˆ—è¡¨",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "prds": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/PrdDocument"
                          }
                        },
                        "total": {
                          "type": "integer"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/prd/generate": {
      "post": {
        "tags": [
          "prd"
        ],
        "summary": "ç”Ÿæˆ PRD æ–‡æ¡£ï¼ˆæµå¼ï¼‰",
        "description": "è°ƒç”¨ AI æ¨¡å‹ç”Ÿæˆ PRDï¼Œè¿”å› SSE æµå¼å“åº”ã€‚å‰ç«¯å¯ç›‘å¬ `data` äº‹ä»¶è·å–é€æ­¥è¾“å‡ºã€‚",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "userInput"
                ],
                "properties": {
                  "userInput": {
                    "type": "string",
                    "description": "ç”¨æˆ·å¯¹ PRD çš„éœ€æ±‚æè¿°"
                  },
                  "workspaceId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "documentIds": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "description": "ç”¨äº RAG æ£€ç´¢çš„æ–‡æ¡£ ID åˆ—è¡¨"
                  },
                  "modelId": {
                    "type": "string",
                    "description": "æŒ‡å®š AI æ¨¡å‹ï¼ˆå¦‚ claude-3.5-sonnetã€glm-4ï¼‰"
                  },
                  "temperature": {
                    "type": "number",
                    "minimum": 0,
                    "maximum": 2,
                    "default": 0.7
                  },
                  "maxTokens": {
                    "type": "integer",
                    "default": 8000
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "SSE æµå¼ PRD å†…å®¹",
            "content": {
              "text/event-stream": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/api/workspaces": {
      "get": {
        "tags": [
          "workspaces"
        ],
        "summary": "è·å–å·¥ä½œåŒºåˆ—è¡¨",
        "responses": {
          "200": {
            "description": "å·¥ä½œåŒºåˆ—è¡¨",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Workspace"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "workspaces"
        ],
        "summary": "åˆ›å»ºå·¥ä½œåŒº",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "name"
                ],
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 100
                  },
                  "description": {
                    "type": "string",
                    "nullable": true
                  },
                  "icon": {
                    "type": "string",
                    "default": "ğŸ“"
                  },
                  "color": {
                    "type": "string",
                    "default": "#6366f1"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "åˆ›å»ºæˆåŠŸ",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Workspace"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/workspaces/{id}": {
      "get": {
        "tags": [
          "workspaces"
        ],
        "summary": "è·å–å·¥ä½œåŒºè¯¦æƒ…",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "å·¥ä½œåŒºè¯¦æƒ…",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Workspace"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "å·¥ä½œåŒºä¸å­˜åœ¨",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "workspaces"
        ],
        "summary": "åˆ é™¤å·¥ä½œåŒº",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "åˆ é™¤æˆåŠŸ"
          }
        }
      }
    },
    "/api/workspaces/{id}/duplicate": {
      "post": {
        "tags": [
          "workspaces"
        ],
        "summary": "å¤åˆ¶å·¥ä½œåŒºï¼ˆå«æ‰€æœ‰å…³è”æ•°æ®ï¼‰",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "å¤åˆ¶æˆåŠŸ",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Workspace"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/prototypes": {
      "get": {
        "tags": [
          "prototypes"
        ],
        "summary": "è·å–åŸå‹åˆ—è¡¨",
        "parameters": [
          {
            "name": "workspace_id",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "åŸå‹åˆ—è¡¨",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Prototype"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "prototypes"
        ],
        "summary": "ç”ŸæˆåŸå‹ï¼ˆAI é©±åŠ¨ï¼‰",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "title",
                  "userInput"
                ],
                "properties": {
                  "title": {
                    "type": "string"
                  },
                  "userInput": {
                    "type": "string",
                    "description": "åŸå‹éœ€æ±‚æè¿°"
                  },
                  "prdId": {
                    "type": "string",
                    "format": "uuid",
                    "nullable": true
                  },
                  "workspaceId": {
                    "type": "string",
                    "format": "uuid",
                    "nullable": true
                  },
                  "modelId": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "ç”ŸæˆæˆåŠŸ",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Prototype"
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}